# Magic Patterns - Vite Template

This code was generated by [Magic Patterns](https://magicpatterns.com) for this design: [Source Design](https://www.magicpatterns.com/c/ro8wims5run19cxqu5oqwq)

## Getting Started

1. Run `npm install`
2. Set your Groq API key in your shell: `export GROQ_API_KEY=your_key_here`
3. Start the API server: `npm run server` (listens on http://localhost:3001)
4. In another terminal, start the frontend dev server: `npm run dev`

The Vite dev server proxies `/api/*` to the Node server during development.

## Image uploads to Groq

This template includes a minimal proxy at `server/index.js` that forwards chat and image prompts to Groq's Chat Completions API without exposing your API key to the browser. The chat UI sends:

- Text: as normal chat messages.
- Image: as a data URL (`data:image/*;base64,...`) using a Groq vision-capable model. The proxy instructs the model to return strict JSON for ID extraction.

Notes:
- Do not put your Groq key in frontend code. Keep it in the server env.
- For production, replace the placeholder vision model ID with a current one available in your Groq account.

## Deploying to Render

Deploy both the Vite frontend and the Node proxy behind a single Render Web Service:

1. Commit your changes and push to GitHub (or any git remote Render can reach).
2. Either click **New → Blueprint Instance** in Render and point it to this repo (Render will pick up `render.yaml`) or create a Web Service manually with these settings:
   - **Environment:** Node
   - **Build command:** `npm install && npm run build`
   - **Start command:** `npm run start`
   - **Node version env var:** `NODE_VERSION=20`
3. Add your secrets as Render environment variables:
   - `GROQ_API_KEY` (required)
   - Optional: `ASSISTANT_SYSTEM_PROMPT` to override the default instructions.
4. Deploy. Render runs the build, producing the Vite `dist/` assets. The Node server now:
   - Serves everything in `dist/` (SPA routing is handled automatically)
   - Responds to `/api/groq-chat` from the same origin, so the browser can call it without CORS tweaks.
5. After the deploy finishes, visit the Render URL—both the UI and API live under that single domain.
